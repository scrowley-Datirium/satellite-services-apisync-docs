<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>server documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">server documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content controller">
                   <div class="content-data">





<ol class="breadcrumb">
  <li>Controllers</li>
  <li >SatInterfaceController</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/satInterface/satInterface.controller.ts</code>
        </p>

            <p class="comment">
                <h3>Prefix</h3>
            </p>
            <p class="comment">
                <code>api-sync</code>
            </p>






            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#createAPIMachineForSatellite" >createAPIMachineForSatellite</a>
                            </li>
                            <li>
                                <a href="#getSatelliteById" >getSatelliteById</a>
                            </li>
                            <li>
                                <a href="#getSatellites" >getSatellites</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#removeAPIMachineForSatellite" >removeAPIMachineForSatellite</a>
                            </li>
                            <li>
                                <a href="#sendEvent" >sendEvent</a>
                            </li>
                            <li>
                                <a href="#sendTaskToSatellite" >sendTaskToSatellite</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#triggerContext" >triggerContext</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section>
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="createAPIMachineForSatellite"></a>
                    <span class="name">
                        <span class="modifier">Async</span>
                        <span ><b>createAPIMachineForSatellite</b></span>
                        <a href="#createAPIMachineForSatellite"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>createAPIMachineForSatellite(id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, machines: <a href="../interfaces/CreateAPIMachine.html" target="_self">CreateAPIMachine[]</a>)</code>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Decorators : </b>
                    <br />
                    <code>@Post(&#x27;api-machine/:id&#x27;)<br /></code>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="99"
                            class="link-to-prism">src/satInterface/satInterface.controller.ts:99</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Create a list of State Machines to make on the API for a satellite</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>id</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Id of Satellite</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>machines</td>
                                    <td>
                                                <code><a href="../interfaces/CreateAPIMachine.html" target="_self" >CreateAPIMachine[]</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Machines to start on API for Satellite</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;literal type&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>A list of machines that are created on API</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getSatelliteById"></a>
                    <span class="name">
                        <span ><b>getSatelliteById</b></span>
                        <a href="#getSatelliteById"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getSatelliteById(id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Decorators : </b>
                    <br />
                    <code>@Get(&#x27;satellite-connections/:id&#x27;)<br /></code>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="33"
                            class="link-to-prism">src/satInterface/satInterface.controller.ts:33</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Gets the Current Satellite Connection for a single Satellite</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>id</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Id of Satellite</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>{ stateMachines: {}; connected: any; tasks: any; priorityTasks: any; maxTasks: any; }</code>

                    </div>
                    <div class="io-description">
                        <p>A Current Satellite Connection</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getSatellites"></a>
                    <span class="name">
                        <span ><b>getSatellites</b></span>
                        <a href="#getSatellites"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getSatellites()</code>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Decorators : </b>
                    <br />
                    <code>@Get(&#x27;satellite-connections&#x27;)<br /></code>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="21"
                            class="link-to-prism">src/satInterface/satInterface.controller.ts:21</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Gets all Current Satellite Connections, probably won&#39;t use often</p>
</div>

                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>literal type</code>

                    </div>
                    <div class="io-description">
                        <p>All Current Satellite Connections</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="removeAPIMachineForSatellite"></a>
                    <span class="name">
                        <span class="modifier">Async</span>
                        <span ><b>removeAPIMachineForSatellite</b></span>
                        <a href="#removeAPIMachineForSatellite"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>removeAPIMachineForSatellite(satId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, machineId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Decorators : </b>
                    <br />
                    <code>@Delete(&#x27;api-machine/:satid/:machineid&#x27;)<br /></code>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="134"
                            class="link-to-prism">src/satInterface/satInterface.controller.ts:134</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Remove a machine from API-Sync by Satellite Id and Machine Name</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>satId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Satellite Id</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>machineId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Name of the Machine</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;literal type&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>Removed boolean and potentially err message</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="sendEvent"></a>
                    <span class="name">
                        <span ><b>sendEvent</b></span>
                        <a href="#sendEvent"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>sendEvent(satId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, machineId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, event: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Decorators : </b>
                    <br />
                    <code>@Post(&#x27;api-machine/:satid/:machineid/event&#x27;)<br /></code>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="158"
                            class="link-to-prism">src/satInterface/satInterface.controller.ts:158</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Send an event to a machine on API-Sync</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>satId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Satellite Id</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>machineId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Name of the Machine</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>event</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Event to send</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>literal type</code>

                    </div>
                    <div class="io-description">
                        <p>sent boolean and potentially err message</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="sendTaskToSatellite"></a>
                    <span class="name">
                        <span ><b>sendTaskToSatellite</b></span>
                        <a href="#sendTaskToSatellite"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>sendTaskToSatellite(id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, tasks: <a href="../interfaces/SatelliteTask.html" target="_self">SatelliteTask[]</a>, trees: <a href="../interfaces/DependencyTree.html" target="_self">DependencyTree[]</a>, commands: <a href="../interfaces/ServiceCommand.html" target="_self">ServiceCommand[]</a>)</code>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Decorators : </b>
                    <br />
                    <code>@Post(&#x27;sat-message/:id&#x27;)<br /></code>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="66"
                            class="link-to-prism">src/satInterface/satInterface.controller.ts:66</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Send a List of Tasks and Trees to a specific Satellite</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>id</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Id of Satellite</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>tasks</td>
                                    <td>
                                                <code><a href="../interfaces/SatelliteTask.html" target="_self" >SatelliteTask[]</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Tasks to send to the Satellite</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>trees</td>
                                    <td>
                                                <code><a href="../interfaces/DependencyTree.html" target="_self" >DependencyTree[]</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Machines to build on the Satellite</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>commands</td>
                                    <td>
                                                <code><a href="../interfaces/ServiceCommand.html" target="_self" >ServiceCommand[]</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>{ taskId: any; }</code>

                    </div>
                    <div class="io-description">
                        <p>A Task Id of the task sent</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="triggerContext"></a>
                    <span class="name">
                        <span class="modifier">Async</span>
                        <span ><b>triggerContext</b></span>
                        <a href="#triggerContext"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>triggerContext(satId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, machineId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, method: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, args: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Decorators : </b>
                    <br />
                    <code>@Post(&#x27;api-machine/:satid/:machineid/method&#x27;)<br /></code>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="177"
                            class="link-to-prism">src/satInterface/satInterface.controller.ts:177</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Trigger a method on a machine on API-Sync</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>satId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Satellite Id</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>machineId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Name of the Machine</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>method</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Method to trigger</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>args</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Optional Args for method</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;literal type&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>triggered boolean and potentially err message</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Body, Controller, Delete, forwardRef, Get, HttpException, HttpStatus, Inject, Param, Post } from &quot;@nestjs/common&quot;;
import { v4 as uuidv4 } from &#x27;uuid&#x27;;

import { CreateAPIMachine, SatelliteTask, DependencyTree, SatelliteConnection, ServiceCommand } from &quot;../interfaces&quot;;
import { AppService } from &quot;../app.service&quot;;
import Log from &quot;../lib/logger&quot;;

@Controller(&#x27;api-sync&#x27;)
export class SatInterfaceController {

    constructor(
        @Inject(forwardRef(() &#x3D;&gt; AppService))
        private _appService: AppService
    ) {}

    /**
     * Gets all Current Satellite Connections, probably won&#x27;t use often
     * @returns All Current Satellite Connections
     */
    @Get(&#x27;satellite-connections&#x27;)
    getSatellites(): { [key: string]: SatelliteConnection } {
        Log.info(&#x27;Getting all Satellite Connections&#x27;);
        const satellites &#x3D; this._appService.satConnections;
        return satellites;
    }

    /**
     * Gets the Current Satellite Connection for a single Satellite
     * @param id Id of Satellite
     * @returns A Current Satellite Connection
     */
    @Get(&#x27;satellite-connections/:id&#x27;)
    getSatelliteById(@Param(&#x27;id&#x27;) id: string) {
        Log.info(&#x60;Getting Satellite Connection ${id}&#x60;);
        if (!id) {
            throw new HttpException(&#x27;No ID provided&#x27;, HttpStatus.BAD_REQUEST);
        }
        
        const sat &#x3D; this._appService.satConnections[id];

        if (!sat) {
            throw new HttpException(&#x27;No Satellite Connection found for ID&#x27;, HttpStatus.INTERNAL_SERVER_ERROR);
        }
        const { stateMachines, connected, tasks, priorityTasks, maxTasks } &#x3D; sat;
        const machines &#x3D; [];
        Object.keys(stateMachines).forEach((key) &#x3D;&gt; {
            const machine &#x3D; stateMachines[key];
            const uo &#x3D; {
                name: key,
                context: machine.fsm.state.context,
                state: machine.fsm.state.value,
            };
            machines.push(uo);
        });
        return { stateMachines: machines, connected, tasks, priorityTasks, maxTasks };
    }

    /**
     * Send a List of Tasks and Trees to a specific Satellite
     * @param id Id of Satellite
     * @param tasks Tasks to send to the Satellite
     * @param trees Machines to build on the Satellite
     * @returns A Task Id of the task sent
     */
    @Post(&#x27;sat-message/:id&#x27;)
    sendTaskToSatellite(@Param(&#x27;id&#x27;) id: string, @Body(&#x27;tasks&#x27;) tasks: SatelliteTask[], @Body(&#x27;trees&#x27;) trees: DependencyTree[], @Body(&#x27;commands&#x27;) commands: ServiceCommand[]) {
        tasks &#x3D; tasks || [];
        trees &#x3D; trees || [];
        commands &#x3D; commands || [];
        Log.info(&#x60;Sending ${tasks.length} Tasks and ${trees.length} Trees and ${commands.length} Commands to ${id}&#x60;);
        if (!id) {
            throw new HttpException(&#x27;No ID provided&#x27;, HttpStatus.BAD_REQUEST);
        }
        
        if (!tasks.length &amp;&amp; !trees.length &amp;&amp; !commands.length) {
            throw new HttpException(&#x27;No Trees and No Tasks&#x27;, HttpStatus.BAD_REQUEST);
        }

        const sat &#x3D; this._appService.satConnections[id];
        if (!sat) {
            throw new HttpException(&#x27;No Satellite Connection found for ID&#x27;, HttpStatus.INTERNAL_SERVER_ERROR);
        }
        
        const taskId &#x3D; uuidv4();
        this._appService.sendToSat$.next({ taskId, tasks, trees, commands, satelliteid: id });
        Log.info(&#x60;Task ${taskId} sent to Satellite ${id}&#x60;);
        return {
            taskId,
        };
    }

    /**
     * Create a list of State Machines to make on the API for a satellite
     * @param id Id of Satellite
     * @param machines Machines to start on API for Satellite
     * @returns A list of machines that are created on API
     */
    @Post(&#x27;api-machine/:id&#x27;)
    async createAPIMachineForSatellite(@Param(&#x27;id&#x27;) id: string, @Body(&#x27;machines&#x27;) machines: CreateAPIMachine[]): Promise&lt;{ [key: string]: boolean }&gt; {
        machines &#x3D; machines || [];
        Log.info(&#x60;Sending ${machines.length} Machines to Connection for ${id}&#x60;);
        if (!id) {
            throw new HttpException(&#x27;No ID provided&#x27;, HttpStatus.BAD_REQUEST);
        }
        
        if (!machines.length) {
            throw new HttpException(&#x27;No Trees and No Tasks&#x27;, HttpStatus.BAD_REQUEST);
        }

        const sat &#x3D; this._appService.satConnections[id];
        if (!sat) {
            throw new HttpException(&#x27;No Satellite Connection found for ID&#x27;, HttpStatus.INTERNAL_SERVER_ERROR);
        }

        const created: { [key: string]: boolean } &#x3D; {};
        machines.forEach((machine) &#x3D;&gt; {
            created[machine.config.id] &#x3D; false;
            const callback &#x3D; () &#x3D;&gt; created[machine.config.id] &#x3D; true;
            this._appService.createFSM.next({ ...machine, satelliteId: id, callback });
        });
        Log.info(&#x60;Attempting to start ${Object.keys(created).length} Machines&#x60;);
        await new Promise((resolve) &#x3D;&gt; setTimeout(() &#x3D;&gt; resolve(true), 2000));
        Log.info(&#x60;Successfully started ${Object.keys(created).filter((k) &#x3D;&gt; created[k]).length} Machines&#x60;);
        return created;
    }

    /**
     * Remove a machine from API-Sync by Satellite Id and Machine Name
     * @param satId Satellite Id
     * @param machineId Name of the Machine
     * @returns Removed boolean and potentially err message
     */
    @Delete(&#x27;api-machine/:satid/:machineid&#x27;)
    async removeAPIMachineForSatellite(@Param(&#x27;satid&#x27;) satId: string, @Param(&#x27;machineid&#x27;) machineId: string): Promise&lt;{removed: boolean; err?: string}&gt; {
        Log.info(&#x60;Attempting to remove ${machineId} from ${satId}&#x60;);
        const err: string &#x3D; await new Promise((resolve) &#x3D;&gt; {
            this._appService.removeFSM.next({ satelliteId: satId, machine: machineId, callback: (msg) &#x3D;&gt; resolve(msg)});
        });
        if (err) {
            return {
                removed: false,
                err
            };
        }
        return {
            removed: true
        };
    }

    /**
     * Send an event to a machine on API-Sync
     * @param satId Satellite Id
     * @param machineId Name of the Machine
     * @param event Event to send
     * @returns sent boolean and potentially err message
     */
    @Post(&#x27;api-machine/:satid/:machineid/event&#x27;)
    sendEvent(@Param(&#x27;satid&#x27;) satId: string, @Param(&#x27;machineid&#x27;) machineId: string, @Body(&#x27;event&#x27;) event: string): { sent: boolean; err?: string } {
        Log.info(&#x60;Attempting to send ${event} to ${machineId} on ${satId}&#x60;);
        try {
            this._appService.sendToAPI.next({ satelliteId: satId, to: machineId, type: event });
        } catch (err) {
            return { sent: false, err }
        }
        return { sent: true }
    }

    /**
     * Trigger a method on a machine on API-Sync
     * @param satId Satellite Id
     * @param machineId Name of the Machine
     * @param method Method to trigger
     * @param args Optional Args for method
     * @returns triggered boolean and potentially err message
     */
     @Post(&#x27;api-machine/:satid/:machineid/method&#x27;)
     async triggerContext(@Param(&#x27;satid&#x27;) satId: string, @Param(&#x27;machineid&#x27;) machineId: string, @Body(&#x27;method&#x27;) method: string, @Body(&#x27;args&#x27;) args: any): Promise&lt;{ triggered: boolean; err?: string }&gt; {
        Log.info(&#x60;Attempting to trigger ${method} on ${machineId} on ${satId}&#x60;);
        try {
            const err: string &#x3D; await new Promise((resolve) &#x3D;&gt; {
                this._appService.triggerContext.next({ satelliteId: satId, to: machineId, method, args, callback: (i) &#x3D;&gt; resolve(i) });
            });
            if (err) {
                return { triggered: false, err };
            }
            return { triggered: true };
        } catch (err) {
            return { triggered: false, err };
        }
    }
}</code></pre>
    </div>
</div>
















                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'controller';
            var COMPODOC_CURRENT_PAGE_URL = 'SatInterfaceController.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
